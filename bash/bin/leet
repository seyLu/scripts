#!/bin/bash

[[ "$_DEBUG" == "true" ]] && set -x

#------------------------------------------------------------------------#
# Simplify folder and file creation when working with leetcode
# Arguments:
#   Leetcode problem name
# Outputs:
#   1 folder + 2 files with placeholder
#------------------------------------------------------------------------#

function main() {
    [[ $# -eq 0 ]] && usage && return

    while [[ $# -gt 0 ]]; do
        leet "$1"
        shift
    done
}

function leet() {
    local -r problem_name="$1"

    mkdir "${problem_name}"
    cd "${problem_name}" || return
    touch "${problem_name}.py" "${problem_name}_soln.py"

    placeholder "${problem_name}"
    cd .. || return
}

function placeholder() {
    read -rd "" placeholder_content <<-EOF
def main():
    print(${problem_name}())
    print(${problem_name}())


def ${problem_name}() -> None:
    pass


if __name__ == "__main__":
    main()
EOF

    read -rd "" empty_python_docstring <<-"EOF"
"""

"""
EOF

    printf '%s\n' "${placeholder_content}" >"${problem_name}.py"
    printf '%s\n' "${empty_python_docstring}\n" >"${problem_name}_soln.py"
    printf '%s\n' "${placeholder_content}" >>"${problem_name}_soln.py"
}

function usage() {
    echo
    printf '%s\n' "Usage: At least one argument required"
}

main "$@"

[[ "$_DEBUG" == "true" ]] && set +x
